# 网络聊天室应用

一个基于Python和PyQt5开发的多功能网络聊天室应用，支持文字聊天、语音通话、文件传输等功能。

## 功能特点

### 核心功能
- ✅ **文字聊天**：支持私聊和多人聊天室
- ✅ **语音通话**：实时语音通信功能
- ✅ **文件传输**：支持发送和接收各种文件
- ✅ **图片分享**：支持发送和查看图片

### 技术特点
- 🎯 **TCP通信**：基于TCP协议的可靠数据传输
- 🎨 **现代化UI**：使用PyQt5构建的美观用户界面
- 🔒 **线程安全**：采用多线程和锁机制确保程序稳定性
- 📱 **跨平台**：支持Windows、macOS和Linux系统
- 🎧 **音频处理**：集成PyAudio实现语音通话功能

## 技术栈

| 技术/库 | 用途 |
|---------|------|
| Python 3.x | 主要开发语言 |
| PyQt5 | GUI界面开发 |
| PyAudio | 音频处理和语音通话 |
| Socket | 网络通信 |
| Threading | 多线程支持 |
| Base64 | 文件和图片编码传输 |
| UUID | 唯一标识符生成 |

## 安装方法

### 1. 克隆项目
```bash
git clone <仓库URL>
cd 网络聊天室应用
```

### 2. 创建虚拟环境
```bash
# Windows
python -m venv venv
venv\Scripts\activate

# macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

### 3. 安装依赖
```bash
pip install -r requirements.txt
```

如果没有requirements.txt文件，可以手动安装：
```bash
pip install PyQt5 PyAudio numpy
```

## 使用指南

### 启动服务器
```bash
python server_tcp.py
```

### 启动客户端
```bash
python client_tcp.py
```

### 启动多个客户端（仅Windows）
```bash
python start_multiple_clients.py
```

### 功能使用

#### 文字聊天
1. 启动客户端后输入用户名
2. 在左侧用户列表中选择用户发起私聊
3. 或选择聊天室进入多人聊天
4. 在输入框中输入消息并发送

#### 发送图片
1. 点击工具栏中的图片按钮
2. 选择要发送的图片文件
3. 图片将自动发送给当前聊天对象

#### 发送文件
1. 点击工具栏中的文件按钮
2. 选择要发送的文件
3. 文件将自动发送给当前聊天对象

#### 语音通话
1. 在私聊窗口中点击语音通话按钮
2. 等待对方接受通话请求
3. 通话期间可以实时语音交流
4. 点击挂断按钮结束通话

## 项目结构

```
网络聊天室应用/
├── client_tcp.py          # 客户端主程序
├── server_tcp.py          # 服务器主程序
├── start_multiple_clients.py  # 多客户端启动脚本
├── README.md             # 项目说明文档
├── file_upload_protocol.md    # 文件上传协议文档
├── .gitignore            # Git忽略文件配置
├── venv/                 # 虚拟环境目录
├── received_files/       # 接收的文件目录
├── received_images/      # 接收的图片目录
└── sent_images/          # 发送的图片目录
```

## 配置说明

### 服务器配置
- 默认监听地址：`0.0.0.0`
- 默认端口：`8888`
- 语音服务器端口：`8889`

### 客户端配置
- 自动连接到本地服务器
- 支持自定义服务器地址和端口

## 常见问题

### 1. 客户端无法启动
**解决方法**：确保虚拟环境已激活，并且所有依赖已正确安装。

### 2. 语音通话无声音
**解决方法**：检查音频设备设置，确保麦克风和扬声器正常工作。

### 3. 文件传输失败
**解决方法**：确保文件大小不超过系统限制，网络连接稳定。

## 开发说明

### 代码风格
- 遵循PEP8编码规范
- 使用中文注释提高代码可读性
- 采用面向对象的设计模式

### 主要类和功能

#### `ClientApp` 类
- 客户端主应用类
- 管理用户界面和网络连接

#### `VoiceClient` 类
- 语音客户端类
- 处理语音通话功能

#### `Server` 类
- 服务器主类
- 管理客户端连接和消息转发

#### `VoiceServer` 类
- 语音服务器类
- 处理语音通话的服务器端逻辑

## 贡献指南

1. Fork本仓库
2. 创建新的功能分支
3. 提交代码更改
4. 创建Pull Request

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 联系方式

如有问题或建议，请联系项目开发者。

---

**版本**: v1.0.0
**最后更新**: 2026-01-04
**开发团队**: 网络聊天室开发组